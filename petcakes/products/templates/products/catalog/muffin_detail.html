{% extends "products/base.html" %}
{% load static %}

{% block content %}
<section class="section">
    <div class="container">
        <div class="row justify-content-center"> 
            <div class="col-12 col-md-8 col-lg-6">
        
                <div class="mb-4">
                    <div class="main-img-container mb-3 text-center">
                        {% if product.image %}
                        <img id="mainImage" src="{{ product.image.url }}" alt="{{ product.name }}" class="img-fluid rounded shadow-sm" style="max-height: 400px; object-fit: cover;">
                        {% else %}
                        <img src="{% static 'products/img/logo.png' %}" class="img-fluid" alt="Sin imagen">
                        {% endif %}
                    </div>

                    {% if product.images.all %}
                    <div class="row g-2 justify-content-center">
                        {% if product.image %}
                        <div class="col-3">
                            <img src="{{ product.image.url }}" onclick="changeImage(this.src)" class="img-thumbnail" style="cursor: pointer; height: 80px; width: 100%; object-fit: cover;">
                        </div>
                        {% endif %}
                        
                        {% for extra in product.images.all %}
                        <div class="col-3">
                            <img src="{{ extra.image.url }}" onclick="changeImage(this.src)" class="img-thumbnail" style="cursor: pointer; height: 80px; width: 100%; object-fit: cover;">
                        </div>
                        {% endfor %}
                    </div>
                    {% endif %}
                </div>

                <h1 class="mb-2">{{ product.name }}</h1>
                <p class="text-muted">{{ product.description }}</p>
                <h3 class="fw-bold text-primary-dark my-3">${{ product.price }}</h3>

                <form method="post" class="card p-4 border-0 shadow-sm bg-light rounded-0">
                    {% csrf_token %}

                    <div class="mb-3">
                        <label class="form-label fw-bold">Eleg√≠ el Pack</label>
                        <select name="pack_size" class="form-select">
                            <option value="Pack x6">Pack x6 unidades</option>
                            <option value="Pack x12">Pack x12 unidades</option>
                            <option value="Pack x24">Pack x24 unidades</option>
                        </select>
                    </div>

                    <div class="mb-4">
                        <label class="form-label fw-bold">Color de la Crema</label>
                        <div class="d-flex gap-2">
                            <select name="cream_color" class="form-select">
                                <option value="Rosa">Rosa</option>
                                <option value="Azul">Azul</option>
                                <option value="Beige">Beige</option>
                            </select>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-primary w-100 rounded-0 py-2">
                        Sumar al carrito üßÅ
                    </button>
                </form>

            </div>
        </div>
    </div>

    <script>
    function changeImage(src) {
        document.getElementById('mainImage').src = src;
    }
    </script>
</section>
{% endblock %}